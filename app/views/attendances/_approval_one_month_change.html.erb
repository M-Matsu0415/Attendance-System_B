<!--上長ユーザーが勤怠変更承認を実行するモーダルウィンドウ-->
<div class="modal-dialog modal-lg modal-dialog-center">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
        <%= form_with(url: attendances_approval_one_month_change_user_path, local: true, method: :patch) do |f| %>
          <% @attendances.each do |user_group_id, attendances| %>
            <% user = User.find_by(id: user_group_id) %>
              <h3 class = "modal-title"><%= "【#{user.name}さんからの勤怠変更申請】" %></h3>
                <table class = "table table-bordered table-condensed table-bases" id = "table-modal">
                  <thead>
                    <tr>
                      <th rowspan = "3">日付</th>
                      <th rowspan = "3">曜日</th>
                      <th colspan = "4">変更前</th>
                      <th colspan = "4">変更後</th>
                      <th rowspan = "3">備考</th>
                      <th rowspan = "3">指示者確認㊞</th>
                      <th rowspan = "3">変更</th>
                      <th rowspan = "3">勤怠を確認する</th>
                    </tr>
                    <tr>
                      <th colspan = "2">出社</th>
                      <th colspan = "2">退社</th>
                      <th colspan = "2">出社</th>
                      <th colspan = "2">退社</th>
                    </tr>
                    <tr>
                      <th>時</th>
                      <th>分</th>
                      <th>時</th>
                      <th>分</th>
                      <th>時</th>
                      <th>分</th>
                      <th>時</th>
                      <th>分</th>
                    </tr>
                  </thead>
                    <% attendances.each do |attendance| %>
                      <%= f.fields_for "attendances[]", attendance do |i| %>
                        <table class = "table table-bordered table-condensed table-hover" id = "table-attendances-body">
                        <tbody>
                          <tr>
                            <td>
                              <%= attendance.worked_on %>
                            </td>
                            <td>
                              <%= i.select :approval_status, [["申請中", "1"], ["承認", "2"],["否認", "3"], ["なし", "4" ]], 
                                  {}, {required: true, class: "month-approval-form-control"} %>
                              <!--オプション設定をする個所を{}で囲むことでclass指定が可能となる。但し、強制的に空欄が選択肢に入る。-->
                              <!--{select機能のオプション(include_blank等} {htmlのオプション(id、class等)}の順番で書く。-->
                              <!--select機能のオプションは使用しないため空欄としている。-->
                            </td>
                            <td>
                              <%= i.label "変更する" %>
                              <%= i.check_box :change_ok %>
                            </td>
                            <td>
                              <%= link_to "確認", show_reference_user_path(month_approval),
                                  class: "btn btn-md btn-primary btn-attendance-monitor"%>
                            </td>
                          </tr>
                        </tbody>
                         
                        </tbody>
                      <% end %>
                    <% end %>
                </table>
          <% end %>
          <%= f.submit "変更を送信する", class: "btn btn-md btn-primary btn-block btn-approval"%>
        <% end %>
    </div>
  </div>
</div>